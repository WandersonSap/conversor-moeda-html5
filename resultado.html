<html>
	<head>
		<title>Conversor de Moeda</title>
		<meta charset="utf-8" />
		<link href="style.css" rel="stylesheet" />
		<script>
		
			var url;
		
			function voltar(){
				var resposta = confirm("Deseja voltar?");
				if(resposta){
					history.go(-1);
				}
			}
			
			window.onload = function(){
				url = new URL(location.href);
				chamarAPI();
			}
			
	
			function chamarAPI(){
				const endpoint = "https://api.exchangeratesapi.io/latest";
				var path = endpoint + "?base=" + url.searchParams.get("moeda_base");
				var request = new XMLHttpRequest();
				request.addEventListener("load", respostaAPI);
				request.open("GET", path);
				request.send();
			}
			
			function respostaAPI(){
				var oResposta = JSON.parse(this.responseText);
				var url = new URL(location.href);
				var sMoedaBase = url.searchParams.get("moeda_base");
				var sMoedaDestino = url.searchParams.get("moeda_destino");
				var fValorDestino = parseFloat(oResposta.rates[sMoedaDestino]).toFixed(2);
				document.querySelector("#moeda_base").innerText = sMoedaBase;
				document.querySelector("#valor_destino").innerText = fValorDestino;
				document.querySelector("#moeda_destino").innerText = sMoedaDestino;
			}
		</script>
	</head>
	<body>
		<p>1 
			<span id="moeda_base"></span> 
			Ã© igual a 
			<span id="valor_destino"></span> <span id="moeda_destino"></span>
		</p>
		<button type="button" onclick="voltar()">
		    Voltar
		</button>
	</body>
</html>